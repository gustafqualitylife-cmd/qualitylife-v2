"use strict";(()=>{var e={};e.id=477,e.ids=[477],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9793:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>h,requestAsyncStorage:()=>f,routeModule:()=>w,serverHooks:()=>S,staticGenerationAsyncStorage:()=>D});var n={};r.r(n),r.d(n,{GET:()=>m,dynamic:()=>p});var o=r(9303),a=r(8716),i=r(3131),s=r(7070),u=r(728);let p="force-dynamic",c=["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"];function l(e){return String(e).padStart(2,"0")}function d(e){return`${e.getFullYear()}-${l(e.getMonth()+1)}-${l(e.getDate())}`}function g(e){let[t,r,n]=e.split("-").map(Number),o=new Date(Date.UTC(t,(r??1)-1,n??1,0,0,0,0)),a=(new Date(o.toLocaleString("en-US",{timeZone:"Europe/Stockholm"})).getTime()-o.getTime())/6e4,i=new Date(o.getTime()-6e4*a);return i.setSeconds(0,0),i}async function m(e){let{searchParams:t}=new URL(e.url),r=t.get("resourceId")??"",n=t.get("week")??"";if(!r||!n)return s.NextResponse.json({ok:!1,error:"Missing params"},{status:400});let o=function(e){let t=new Date(e),r=t.getDay();return t.setDate(t.getDate()-(r+6)%7),t.setHours(0,0,0,0),t}(function(e){let[t,r,n]=e.split("-").map(Number);return new Date(t,(r??1)-1,n??1,0,0,0,0)}(n)),a=d(o),i=new Date(o);i.setDate(o.getDate()+7);let p=d(i),l=g(a),m=g(p),w=await u._.openSlot.findMany({where:{resourceId:r,start:{gte:l,lt:m}},orderBy:{start:"asc"}}),f={};for(let e of w){let t=new Date(new Date(e.start).toLocaleString("en-US",{timeZone:"Europe/Stockholm"})),r=d(t),n=t.toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"});c.includes(n)&&(f[r]||(f[r]=[]),f[r].push({iso:e.start.toISOString(),label:n}))}return s.NextResponse.json({ok:!0,days:f})}let w=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/contact/open/week/route",pathname:"/api/contact/open/week",filename:"route",bundlePath:"app/api/contact/open/week/route"},resolvedPagePath:"C:\\Users\\gusta\\Desktop\\Webbutveckling\\qualitylife\\src\\app\\api\\contact\\open\\week\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:D,serverHooks:S}=w,k="/api/contact/open/week/route";function h(){return(0,i.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:D})}},728:(e,t,r)=>{r.d(t,{_:()=>o});let n=require("@prisma/client"),o=global.prisma??new n.PrismaClient}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(9793));module.exports=n})();